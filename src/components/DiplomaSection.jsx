import React, { useState } from "react";
import { useTranslation } from "react-i18next";
import { Swiper, SwiperSlide } from "swiper/react";
import { Navigation, Pagination } from "swiper/modules";
import "swiper/css";
import "swiper/css/navigation";
import "swiper/css/pagination";

// Données des matières avec description
const subjects = [
  { name: "قرآن وتجويده", icon: "📖", description: "إتقان التجويد يُمكن الطالب من فهم كلام الله وتلاوته بشكل سليم، مما يعزز الفهم الصحيح للأحكام الشرعية ويزيد من بركة القرآن في حياة الفرد." },
  { name: "العقيدة", icon: "🧿", description: "علم العقيدة هو الأساس الذي يُبنى عليه الإيمان الصحيح. يُعنى هذا العلم بتعريف المسلم بأصول الإيمان، مثل التوحيد وأسماء الله وصفاته، والإيمان بالرسل والكتب السماوية..." },
  { name: "الفقه", icon: "⚖️", description: "علم الفقه هو العلم الذي يختص بمعرفة الأحكام الشرعية العملية من أدلتها التفصيلية. يتناول هذا العلم حياة المسلم اليومية، من عبادات ومعاملات، لتكون وفقًا لمراد..." },
  { name: "النحو", icon: "✍️", description: "إتقان علم النحو يجعل الطالب قادرًا على فهم النصوص الشرعية واللغوية بعمق، كما يُمكنه من التعبير بشكل صحيح وواضح، مما يعزز تواصله وفهمه للغة القرآن..." },
  { name: "الصرف", icon: "🔤", description: "علم الصرف هو العلم الذي يهتم بدراسة بنية الكلمة العربية وكيفية تصريفها لتُناسب المعاني المختلفة. يُعد الصرف مكملًا للنحو، حيث يُعنى بتشكيل الكلمات وتغيير صيغها..." },
  { name: "الإملاء", icon: "📝", description: "علم الإملاء يهتم بتعليم قواعد الكتابة الصحيحة في اللغة العربية، بما في ذلك ضبط الكلمات، استخدام علامات الترقيم، وكتابة الهمزات بشكل سليم. يُعتبر الإملاء أساسًا..." },
  { name: "الحديث", icon: "🗣️", description: "يُمكن الطالب من كتابة النصوص بشكل صحيح يعكس الفهم والمعنى المطلوب. يُساعد في تجنب الأخطاء الكتابية التي قد تؤدي إلى سوء الفهم. يُعزز مهارات التعبير..." },
  { name: "السيرة", icon: "🌟", description: "تُعَدُّ السيرة النبوية مادة أساسية في الدراسات الإسلامية، فهي تُعرِّفُ الطلاب بحياة النبي محمد ﷺ، من ولادته إلى وفاته. تُعَلِّمُ السيرة القيم الأخلاقية، والصبر، والحكمة..." },
  { name: "الأخلاق", icon: "❤️", description: "الأخلاق تُعدّ ركيزة أساسية في تكوين طالب العلم الشرعي، لأنها تُجسد التطبيق العملي للمعرفة الدينية. فالعلم الشرعي بلا أخلاق كالشجرة بلا ثمر. دراسة الأخلاق تُعزز..." },
  { name: "المنطق", icon: "🧠", description: "المنطق هو علم يبحث في قواعد التفكير السليم ويُعين على التمييز بين الحجج الصحيحة والفاسدة. يُعدّ دراسة المنطق ضرورية لطالب الشريعة لأنه يُمكنه من فهم..." },
  { name: "الأدب", icon: "📚", description: "الأدب العربي هو سجل حي يعكس تاريخ الأمة الإسلامية وثقافتها من خلال الشعر والنثر والخطابة. دراسة الأدب العربي تُكسب طالب الشريعة مهارة التعبير البليغ والفصاحة..." },
  { name: "أصول الفقه", icon: "📐", description: "أصول الفقه هو العلم الذي يُعنى بدراسة القواعد والمبادئ التي يُستنبط منها الحكم الشرعي. يُعدّ هذا العلم أساسًا لفهم النصوص الشرعية من القرآن الكريم والسنة..." },
  { name: "البلاغة", icon: "📢", description: "البلاغة هي العلم الذي يُعنى بإيصال المعاني بأجمل أسلوب وأوضح بيان، وهي أداة أساسية لفهم النصوص الشرعية من القرآن الكريم والسنة النبوية. تساعد دراسة البلاغة..." },
  { name: "مصطلح الحديث", icon: "📖", description: "علم الحديث هو العلم الذي يهتم بجمع وتصنيف روايات النبي محمد ﷺ وتوثيقها، ويُعنى بتحديد صحة هذه الأحاديث من عدمها. يُعد هذا العلم أساسًا لفهم..." },
  { name: "التفسير", icon: "🔍", description: "علم التفسير هو العلم الذي يهتم بفهم وتأويل معاني القرآن الكريم. يشمل التفسير شرح وتوضيح الكلمات، المفاهيم، الأحكام، والعبر الموجودة في النص القرآني. يُعنى العلماء..." },
  { name: "الفرائض", icon: "📊", description: "الفرائض في العلوم الشرعية تعني أحكام الميراث والقسمة التي فرضها الله في القرآن الكريم. يُعنى علم الفرائض بتوزيع التركات وفقًا للشريعة الإسلامية، بما يحقق العدل..." },
  { name: "أحاديث الأحكام", icon: "📜", description: "أحاديث الأحكام هي مجموعة الأحاديث النبوية التي تتناول الأحكام الشرعية المتعلقة بالعبادات والمعاملات والأخلاق في الإسلام. تُعتبر هذه الأحاديث المصدر الثاني للتشريع بعد القرآن الكريم،..." },
  { name: "آيات الأحكام", icon: "🕋", description: "آيات الأحكام هي الآيات القرآنية التي تتناول الأحكام الشرعية المتعلقة بالعبادات والمعاملات في الإسلام. تشمل هذه الآيات أحكام الصلاة، الزكاة، الصوم، الحج، الطهارة، الزواج، الطلاق،..." },
  { name: "فن الدعوة والخطابة", icon: "🎙️", description: "فن الدعوة والخطابة هو مهارة الاتصال الفعال باستخدام الكلمات لإيصال رسالة دينية أو اجتماعية بشكل مؤثر. يتطلب هذا الفن قدرة على الإقناع، والفصاحة، والبراعة في..." },
  { name: "الفرق الإسلامية", icon: "🧭", description: "الفرق الإسلامية هي الجماعات أو المذاهب التي تفرعت عن الإسلام بسبب اختلافات في العقيدة، الفقه، أو الممارسة الدينية. تاريخياً، ظهرت هذه الفِرَق نتيجة لاختلافات في..." },
];

export default function DiplomaSection() {
  const { i18n } = useTranslation();
  const isRTL = i18n.language === "ar";
  const [modalSubject, setModalSubject] = useState(null);

  return (
    <section className="bg-white py-16 px-4 md:px-12" id="diploma-section">
      <div className="max-w-6xl mx-auto">
        {/* Deux blocs descriptifs */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          <div className="bg-green-100 p-6 rounded-2xl shadow">
            <h3 className="text-xl font-semibold mb-4 text-green-900">شهادة الأهلية</h3>
            <p className="text-gray-700 leading-relaxed text-justify">
              شهادة الأهلية هي إحدى الشهادات الأساسية التي تمنحها مؤسسات التعليم الزيتوني، وتمثل مرحلة متقدمة في السلم التعليمي الزيتوني.
              يحصل الطالب على هذه الشهادة بعد اجتياز برنامج دراسي مكثف يركز على العلوم الشرعية، اللغة العربية، والعلوم المساعدة مثل المنطق والبلاغة.
              تعد شهادة التحصيل دليلًا على إتقان الطالب للمقررات الأساسية التي تؤهله للانتقال إلى مستويات أعلى من الدراسة الزيتونية.
              وتشمل المناهج المتبعة في هذه المرحلة دراسات معمقة للفقه، التفسير، الحديث، والنحو، مما يعكس التزام جامع الزيتونة بتخريج طلبة على دراية راسخة بالمبادئ الإسلامية.
            </p>
          </div>
          <div className="bg-blue-100 p-6 rounded-2xl shadow">
            <h3 className="text-xl font-semibold mb-4 text-blue-900">شهادة التحصيل</h3>
            <p className="text-gray-700 leading-relaxed text-justify">
              تُعتبر شهادة التحصيل الخطوة التالية في مسار التعليم الزيتوني، وتُمنح للطالب بعد أن يُثبت استيعابه المتقدم للعلوم الشرعية والأدبية وإتقانه لمهارات البحث والتحليل.
              تؤهل هذه الشهادة الطالب للقيام بوظائف التدريس أو الإرشاد الديني، وتُعد بمثابة اعتراف رسمي بكفاءته العلمية وقدرته على الإسهام في المجالين الأكاديمي والدعوي.
              يتم التركيز خلال هذه المرحلة على التخصص في الفقه المقارن، أصول الفقه، علوم الحديث، إضافة إلى تعزيز قدرات الطالب في تفسير النصوص الشرعية بما يتناسب مع المستجدات المعاصرة.
            </p>
          </div>
        </div>

        {/* Carrousel des matières */}
        <h2 className="text-2xl font-bold mb-6 text-center">
          المواد المطلوبة للحصول على الشهادات
        </h2>
        <Swiper
          slidesPerView={1}
          spaceBetween={20}
          breakpoints={{
            640: { slidesPerView: 2 },
            768: { slidesPerView: 3 },
            1024: { slidesPerView: 4 },
          }}
          navigation
          pagination={{ clickable: true }}
          modules={[Navigation, Pagination]}
          dir={isRTL ? "rtl" : "ltr"}
        >
          {subjects.map((s, idx) => (
            <SwiperSlide key={idx}>
              <button
                className="bg-gray-100 p-6 rounded-xl shadow text-center hover:scale-105 transition-transform duration-300 w-full"
                onClick={() => setModalSubject(s)}
              >
                <div className="text-4xl mb-2">{s.icon}</div>
                <h4 className="text-lg font-semibold">{s.name}</h4>
              </button>
            </SwiperSlide>
          ))}
        </Swiper>

        {/* Modal */}
        {modalSubject && (
          <div
            className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
            onClick={() => setModalSubject(null)}
          >
            <div
              className="bg-white p-6 rounded-lg shadow-lg max-w-lg mx-4"
              onClick={(e) => e.stopPropagation()}
            >
              <h3 className="text-2xl font-bold mb-4">{modalSubject.name}</h3>
              <p className="text-gray-700 mb-6">{modalSubject.description}</p>
              <button
                onClick={() => setModalSubject(null)}
                className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
              >
                إغلاق
              </button>
            </div>
          </div>
        )}
      </div>
    </section>
  );
}